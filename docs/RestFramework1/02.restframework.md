# Django Rest Framework?
  
![img](../.vuepress/public/images/DRFlogo.png)  
  
#### ğŸ§±Preference

> Windows10  
> python 3.7 ì´ìƒ  
> Git Bash  
> Django ê¸°ë³¸ì ì¸ ê°œë…  
> HTTP Method  

---

ì•ì„œ ì„¤ëª…í•œ RESTì˜ ì¥ì ê³¼ í•„ìš”ì„±ì„ ì–´ëŠì •ë„ ì´í•´í•˜ì˜€ìœ¼ë©´, ì‹¤ì œë¡œ ì‚¬ìš©í•´ë³´ì•„ì•¼ê² ì£ .

## 1. DRF(Django Rest Framework)ë€?

Django ì•ˆì—ì„œ RESTful API ì„œë²„ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.

[ê³µì‹ë¬¸ì„œ](https://www.django-rest-framework.org/)ì—ì„œ ì„¤ëª…í•˜ëŠ” Django REST Frameworkë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

- ì›¹ ë¸Œë¼ìš°ì € APIëŠ” ê°œë°œìì—ê²Œ í° ì‚¬ìš©ì„±ì„ ì¦‰ ê°œë°œì„ ì‰½ê²Œ ë§Œë“¤ì–´ ì¤€ë‹¤.  
- ì¸ì¦ ì •ì±…ì— OAuth1, OAuth2ë¥¼ ìœ„í•œ ì¶”ê°€ì ì¸ íŒ¨í‚¤ì§€ê°€ ì¶”ê°€ ë˜ì–´ ìˆëŠ” ê²½ìš°  
- ì‹œë¦¬ì–¼ë¼ì´ì¦ˆ ê¸°ëŠ¥ì„ ì œê³µì„ í•´ì¤€ë‹¤. (DB data -> JSON)  
- ë¬¸ì„œí™” ë° ì»¤ë®¤ë‹ˆí‹° ì§€ì›ì´ ì˜ ë˜ì–´ìˆë‹¤.  

---

## 2. Django ê¸°ë³¸ app ë§Œë“¤ê¸°

DRFë¥¼ ì‚¬ìš©í•˜ê¸° ì•ì„œ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ [ì´ì „ ì„¸ì…˜](https://jun108059.github.io/django-blog/Blogdjango/01.djangoblog.html)ì˜ ë‚´ìš©ì„ ì°¸ê³ í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤.

```shell script
rest_tutorial
â”œâ”€â”€ api
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ admin.py
â”‚   â”œâ”€â”€ apps.py
â”‚   â”œâ”€â”€ migrations
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ tests.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ views.py
â”œâ”€â”€ db.sqlite3
â”œâ”€â”€ manage.py
â””â”€â”€ tutorial
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ settings.py
    â”œâ”€â”€ urls.py
    â””â”€â”€ wsgi.py
```

```shell script
$ python -m venv myvenv # ê°€ìƒí™˜ê²½ ìƒì„±

$ source myvenv/scripts/activate # ê°€ìƒí™˜ê²½ ì‹¤í–‰

$ pip install django # django ì„¤ì¹˜

$ django-admin startproject tutorial #í”„ë¡œì íŠ¸ ìƒì„±

$ python manage.py startapp api # app ìƒì„±
```

---

### â¹ 2.1 app ê¸°ë³¸ mapping

[ì´ì „ ì„¸ì…˜](https://jun108059.github.io/django-blog/Blogdjango/01.djangoblog.html)ì—ì„œ í–ˆë˜ ë‚´ìš©ê³¼ ê±°ì˜ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— ì°¸ê³ í•˜ì‹œë ¤ë©´ ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ì„œ ë³´ì‹œë©´ ë©ë‹ˆë‹¤.

<details>
<summary>âœ ê¸°ë³¸ ì„¤ì • ì‚´í´ë³´ê¸°</summary>

#### 2.1.1. settings.py ì„¤ì •

`rest_tutorial/tutorial/settings.py`

```python
INSTALL_APPS = [
	...
    'api', # add
]
```

#### 2.1.2 views.py ì„¤ì •

`rest_tutorial/api/views.py`

```python
from django.shortcuts import render
from django.http import HttpResponse

def hello(request):
    return HttpResponse("<h1>Hello, world!</h1>")
```

#### 2.1.3 urls.py ì„¤ì •

`rest_tutorial/tutorial/urls.py`

```python
from django.contrib import admin
from django.urls import path
import api.views   # views.py ì— ì‘ì„±í•œ hello í•¨ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', api.views.hello, name="hello"),
]
```

#### 2.1.4 Model ìƒì„±

`rest_tutorial/api/models.py`

```python
from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
    body = models.TextField()

    def __str__(self):
        return self.title

```

**Migration**

```shell script
$ python manage.py makemigrations
$ python manage.py migrate
```

#### 2.1.5 Admin ìƒì„±

```shell script
$ python manage.py createsuperuser
```

#### 2.1.6 Adminì— model ë“±ë¡

`rest_tutorial/api/admin.py`

```python
from django.contrib import admin
from .models import Post

admin.site.register(Post)
```

ê¸°ë³¸ì ì¸ Settingì€ ì´ì •ë„ë§Œ í•´ë„ ì¢‹ìŠµë‹ˆë‹¤.

</details>

---

## 3. Django Rest Framework ì„¤ì¹˜

Python ê°€ìƒí™˜ê²½ì„ ì‹¤í–‰ì‹œì¼œì£¼ê³  `pip`ë¡œ ê°„ë‹¨í•˜ê²Œ ì„¤ì¹˜í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```shell script
pip install djangorestframework
```

### â¹ 3.1 setting.py ì„¤ì •ì— ì¶”ê°€í•˜ê¸°

`rest_tutorial/tutorial/settings.py`

```python
INSTALL_APPS = [
	...
    'api',
    'rest_framework', # add
]
```

---

## 4. DRFì˜ í•µì‹¬ ê¸°ëŠ¥ - Serializer ë€

ì§€ë‚œ í¬ìŠ¤íŒ…ì—ì„œ ì•Œì•„ë³¸ Webì´ ì•„ë‹Œ Android Appê³¼ ê°™ì€ ë©€í‹° í”Œë«í¼ì„ ì „ë¶€ í•˜ë‚˜ì˜ `back-end`ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” RESTì˜ ì¥ì ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ `JSON` ë“±ì˜ ë°ì´í„° í˜•ì‹ì„ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ë‹¤ê³  í–ˆì—ˆì£ !

**Serializer**ê°€ `queryset`ê³¼ `ëª¨ë¸ ì¸ìŠ¤í„´ìŠ¤`ì™€ ê°™ì€ ë³µì¡í•œ ë°ì´í„°ë¥¼ `JSON`, `XML` ë˜ëŠ” ë‹¤ë¥¸ ì½˜í…ì¸  ìœ í˜•ìœ¼ë¡œ ì‰½ê²Œ ë³€í™˜í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

ë°›ì€ ë°ì´í„°ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•œ ë‹¤ìŒ, ë³µì¡í•œ íƒ€ì…ìœ¼ë¡œ í˜• ë³€í™˜í•  ìˆ˜ ìˆë„ë¡ `serializeation`ì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ê°€ëŠ¥í•©ë‹ˆë‹¤.

> ë¬¼ë¡  SErializerë¥¼ í†µí•´ ëª¨ë¸ ì¸ìŠ¤í„´ìŠ¤ê°€ JSON ë˜ëŠ” Dictionary í˜•íƒœë¡œ `ì§ë ¬í™”`ë˜ë©´ ì¢‹ì€ ì ì€ ë” ë§ìŠµë‹ˆë‹¤!

---

### â¹ 4.1 serializers.py ìƒì„±

api í´ë” ì•„ë˜ì— ë‹¤ìŒ python íŒŒì¼ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.

`rest_tutorial/api/serializers.py`

```python
from rest_framework import serializers
from .models import Post

class PostSerializer(serializers.ModelSerializer):
    class Meta:
        model = Post  # ëª¨ë¸ ì„¤ì •
        fields = ('id', 'title', 'pub_date', 'body')  # í•„ë“œ ì„¤ì •
```

### â¹ 4.2 views.py ì‘ì„±

DRFëŠ” ë³´í†µ ì‚¬ëŒë“¤ì´ ìì£¼ ì‚¬ìš©í•˜ëŠ” ê³µí†µì ì¸ view ë¡œì§ì„ ê·¸ë£¹í™” í•œ `viewset`ì„ ì œê³µí•©ë‹ˆë‹¤.

`viewset`ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ CRUD ë¡œì§ì„ ì§ì ‘ ì§œì§€ ì•Šì•„ë„ ì´ ê¸°ëŠ¥ë“¤ì´ ì‚¬ìš© ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

~~ì•„ë¬´ì½”í† ~~ í•˜ì§€ ì•Šì•„ë„ CRUD ê¸°ëŠ¥ì´ ë‹¤ ëœë‹¤ëŠ” ê±°ì£ !

`rest_tutorial/api/views.py`

```python
from rest_framework import viewsets
from .serializers import ApiSerializer
from .models import Post

class ApiViewSet(viewsets.ModelViewSet):
    queryset = Post.objects.all()
    serializer_class = ApiSerializer
```

### â¹ 4.3 urls.py ì‘ì„±

DRFëŠ” urlì„ ìë™ìœ¼ë¡œ ë§µí•‘í•´ì£¼ëŠ” routerë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì•ì„œ ìƒì„±í•œ viewsetì„ routerì— ì—°ê²°í•˜ê²Œ ë˜ë©´ ìë™ìœ¼ë¡œ urlì„ ë§µí•‘í•´ì£¼ì–´ ì‚¬ìš©ìê°€ ì§ì ‘ urlì„ ë§µí•‘í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.

```python
from django.contrib import admin
from django.urls import path, include
from rest_framework import routers
from api import views

router = routers.DefaultRouter()
router.register(r'posts', views.PostViewSet)
# prefix = posts, viewSet = PostViewSet

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include(router.urls)),
]
```

ìœ„ì—ì„œ router.registerë¡œ  prefixë¥¼ 'posts'ë¡œ ì„¤ì •ì„ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

routerëŠ” ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ urlì„ ë§µí•‘í•˜ê²Œ ë©ë‹ˆë‹¤.

```python
URL pattern: ^posts/$ Name: 'post-list'
```

---

## 5. ì‹¤í–‰í•˜ê¸°

```shell script
$ python manage.py runserver
```

### â¹ 5.1 ì™„ì„±!

ë§Œë“  `api`ë¡œ `CRUD` ìš”ì²­ì„ í•´ë´…ì‹œë‹¤.

api ìš”ì²­ uriê³¼ methodë¥¼ ì •ë¦¬í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

`GET /posts/` : ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ

`POST /posts/` : ê²Œì‹œê¸€ ì¶”ê°€

`PUT /posts/` : ê²Œì‹œê¸€ ìˆ˜ì •

`DELETE /posts/` : ê²Œì‹œê¸€ ì‚­ì œ

---

ë¨¼ì € `localhost:8000` ìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ ë˜ë©´ í•´ë‹¹ í™”ë©´ì´ ë³´ì¼ ê±°ì—ìš”.

![img](../.vuepress/public/images/Rest/DRF01.png)  

posts ë§í¬ë¡œ ë“¤ì–´ê°€ë´…ì‹œë‹¤.

![img](../.vuepress/public/images/Rest/DRF02.png)  

`GET /posts/`ëŠ” ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ë¥¼ ìš”ì²­í•˜ëŠ” uriì´ë‹¤.

ì•„ë˜ `form`ìœ¼ë¡œ ê²Œì‹œê¸€ ì •ë³´ë¥¼ ì…ë ¥í•´ë³´ì„¸ìš”.

ì…ë ¥ í•˜ê³  `post` ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ POST ë©”ì†Œë“œë¡œ `/posts/` uriì— ìš”ì²­ì´ ê°€ê³ , í•´ë‹¹ ì •ë³´ê°€ ì €ì¥ë©ë‹ˆë‹¤.

![img](../.vuepress/public/images/Rest/DRF03.png)

---

ë‚˜ë¨¸ì§€ ê¸°ëŠ¥ë„ í•œë²ˆ í…ŒìŠ¤íŠ¸ í•´ë³´ì„¸ìš”!

DRFëŠ” ë”ìš± ë§ì€ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ì»¤ìŠ¤í…€í•  ìˆ˜ ìˆê²Œ ì œê³µë˜ë‹ˆê¹Œ
í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ë•Œ í™œìš©í•˜ë©´ ë”ìš± í¸ë¦¬í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆê² ì£ !

---

#### Reference

- https://jamanbbo.tistory.com/43  
- https://www.django-rest-framework.org/tutorial/quickstart/  

---