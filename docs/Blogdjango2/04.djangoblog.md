# Django Portfolio ë§Œë“¤ê¸° (media)
  
![img](../.vuepress/public/images/Logo.png)  
  
#### ğŸ§±Preference

> Windows10  
> python 3.7 ì´ìƒ  
> Git Bash  
> MTV ê¸°ë³¸ì ì¸ ê°œë…

---

ì´ì œ ëª¨ë¸ì„ í™œìš©í•´ì„œ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê³ , `portfolio` í˜ì´ì§€ì— ë„ì›Œë´…ì‹œë‹¤. 

ë¨¼ì € ì‚¬ìš©ìê°€ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œ í•˜ë©´ ì´ë¯¸ì§€ê°€ ì €ì¥ë  ì¥ì†Œë¶€í„° ë§Œë“¤ì–´ ë´…ì‹œë‹¤. 

ì•ì„œ DjangoëŠ” `staticíŒŒì¼`ì„ ê°œë°œìê°€ ì¤€ë¹„í•˜ëŠ” íŒŒì¼(static)ê³¼ 

ì´ìš©ìë“¤ì´ ì˜¬ë¦¬ëŠ” `íŒŒì¼(media)` ë‘ê°€ì§€ë¡œ êµ¬ë¶„í•œë‹¤ê³  í–ˆì—ˆìŠµë‹ˆë‹¤.

## settings.pyì— media ì„¤ì •í•˜ê¸°

ì´ì „ ì‹œê°„ì— ì‘ì„±í–ˆë˜ `STATIC_ROOT`ì™€ `STATIC_URL` ê·¸ëŒ€ë¡œ ë³µì‚¬ ë¶™ì—¬ë„£ê¸° í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  staticì„ ì „ë¶€ mediaë¡œ ë°”ê¿”ì¤ë‹ˆë‹¤.

```bash
MEDIA_ROOT = os.path.join(BASE_DIR, 'media')
MEDIA_URL = '/media/'
```

![img](../.vuepress/public/images/django2/portfolio-15.png)

---

## url ìˆ˜ì •í•˜ê¸°

```python
from django.contrib import admin
from django.urls import path
import blog.views
import portfolio.views
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', blog.views.home, name="home"),
    path('<int:post_id>/', blog.views.detail, name="detail"),
    path('blog/new/', blog.views.new, name='new'),
    path('blog/create/', blog.views.create, name='create'),
    path('<int:post_id>/delete', blog.views.delete, name="delete"),

    path('portfolio/', portfolio.views.portfolio, name='portfolio'),
]+ static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```
urls.pyì˜ ë‚´ìš©ì„ ìœ„ì™€ ê°™ì´ ìˆ˜ì •í•©ë‹ˆë‹¤.  

`settings`ì™€ `static` ê´€ë ¨ ë‚´ìš©ì„ importí•˜ê³  ë§¨ ë§ˆì§€ë§‰ì— `static` ê´€ë ¨í•œ í•œì¤„ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤. 

ê·¸ëƒ¥ ì´ë ‡ê²Œ í•´ì•¼ ì˜¬ë¦° ì´ë¯¸ì§€ë¥¼ ì½ì–´ì˜¬ìˆ˜ ìˆêµ¬ë‚˜ ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.

`ì°¸ê³ `

```python
]+ static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

urlpatterns += static(settings.MEDIA_URL,document_root=settings.MEDIA_ROOT)
```

> ìœ„ì˜ ëª¨ì–‘ì´ ì´ìƒí•˜ë‹¤, ìµìˆ™í•˜ì§€ ì•Šë‹¤ ì‹¶ìœ¼ì‹œë©´ ì´ë ‡ê²Œ ì“°ì…”ë„ ë©ë‹ˆë‹¤. ê°™ì€ ëœ»ì…ë‹ˆë‹¤.

---

## model ë§Œë“¤ê¸°

ì´ë²ˆì— ëª¨ë¸ì—ì„œ ë°›ì•„ì˜¬ ì •ë³´ëŠ” ì´ë¯¸ì§€ íŒŒì¼ê³¼ í…ìŠ¤íŠ¸ íŒŒì¼ì…ë‹ˆë‹¤. ëª¨ë¸ì„ ë§Œë“¤ì–´ ë´…ì‹œë‹¤.

portfolioí´ë”ì˜ `models.py`ë¥¼ ì—´ì–´ ì•„ë˜ ì½”ë“œë¥¼ ì…ë ¥í•´ì¤ë‹ˆë‹¤.

```python
class Portfolio(models.Model):
    title = models.CharField(max_length=255)
    image = models.ImageField(upload_to='images/')
    description = models.CharField(max_length=500)

    def __str__(self):
        return self.title
```

> `ì£¼ì˜` class ëª…ì€ í•­ìƒ ëŒ€ë¬¸ìë¡œ ì‹œì‘í•˜ê²Œ ë§Œë“­ì‹œë‹¤. ì´ê±´ ê°œë°œìê°„ì˜ ì•½ì†ì…ë‹ˆë‹¤.

DB ì•ˆì— ë°ì´í„°ë“¤ì„ ì–´ë–»ê²Œ êµ¬ì„±í• ì§€ ë§Œë“œëŠ” ì„¤ê³„ë„ ê°™ì€ ê²ë‹ˆë‹¤. ì—¬ê¸°ì— ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì ì–´ì•¼í•˜ëŠ”ì§€ëŠ” [django documentation](https://docs.djangoproject.com/ko/3.1/topics/db/models/)ì— ì˜ ë‚˜ì™€ìˆìŠµë‹ˆë‹¤. ì›í•˜ëŠ” ëª¨ë¸ êµ¬ì„±ì´ ìˆì„ë•Œ ì°¾ì•„ë³´ë©° ì‘ì„±í•˜ë©´ ë©ë‹ˆë‹¤.

ì•ì„œ ë§Œë“¤ì—ˆë˜ `blog app`ì˜ modelê³¼ ë‹¤ë¥¸ ì ì´ ìˆë‹¤ë©´ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œ í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤.

ê·¸ë˜ì„œ `image`ë¥¼ ì‚´í´ë³´ë©´ `upload_to='images/'`ë¼ëŠ” ë‚´ìš©ì´ ìˆëŠ”ë° 

ì´ë¶€ë¶„ì´ ì—…ë¡œë“œëœ ì´ë¯¸ì§€ë“¤ì„ images í´ë”ì•ˆì— ë„£ìœ¼ë¼ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.

ìœ„ì™€ ê°™ì´ ëª¨ë¸ êµ¬ì„±ì´ ëë‚¬ìœ¼ë©´ migrationì„ í•  ì°¨ë¡€ì…ë‹ˆë‹¤.

```bash
python manage.py makemigrations
```

```bash
python manage.py migrate
```

ë¥¼ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ì¤ë‹ˆë‹¤. ê²½ê³ ì°½ì´ ëœ¨ë©´ì„œ Pillowê°€ ì„¤ì¹˜ì•ˆë¬ë‹¤ê³  ë©”ì„¸ì§€ê°€ ë‚˜ì˜¤ë©´, ê·¸ê²ƒë„ ì„¤ì¹˜í•´ ì¤ë‹ˆë‹¤.

```bash
pip install Pillow
```

![img](../.vuepress/public/images/django2/portfolio-16.png)


### adminì— ëª¨ë¸ ë“±ë¡

ê·¸ë¦¬ê³  django adminì—ê²Œ ìƒˆë¡œìš´ ëª¨ë¸ì´ ìƒê²¼ë‹¤ëŠ”ê±¸ ì•Œë ¤ì¤˜ì•¼ í•©ë‹ˆë‹¤.

ì•ì„œ blog appì—ì„œ ì‘ì„±í–ˆë˜ê±¸ ë³µë¶™í•´ ì˜µì‹œë‹¤. blog í´ë” ì•ˆì— admin.pyì•ˆì— ìˆëŠ” ë‚´ìš©ì„ ë³µì‚¬í•´, portfolio ì•ˆ admin.pyì•ˆì— ë¶™ì—¬ë„£ê³ , blogë¼ê³  ì“°ì—¬ì§„ ë‚´ìš©ì„ ì „ë¶€ portfolioë¡œ ë°”ê¿‰ì‹œë‹¤.

```python
from django.contrib import admin

from .models import Portfolio

# Register your models here.
admin.site.register(Portfolio)
```

ì €ì¥í•˜ê³  admin í˜ì´ì§€ë¡œ ë“¤ì–´ê°€ ì œëŒ€ë¡œ ë“±ë¡ë˜ì—ˆë‚˜ í™•ì¸í•´ ë´…ì‹œë‹¤.

![img](../.vuepress/public/images/django2/portfolio-17.png)

> ì˜ ëœ¬ë‹¤ë©´ ì„±ê³µ

ì €ì¥í•˜ê³  admin í˜ì´ì§€ë¡œ ë“¤ì–´ê°€ ì œëŒ€ë¡œ ë“±ë¡ë˜ì—ˆë‚˜ í™•ì¸í•´ ë´…ì‹œë‹¤.

![img](../.vuepress/public/images/django2/portfolio-18.png)

> ì´ë¯¸ì§€ í•˜ë‚˜ ì²¨ë¶€í•´ì„œ ëŒ€ì¶© ê¸€ì„ ì¨ë´…ì‹œë‹¤.


![img](../.vuepress/public/images/django2/portfolio-19.png)

> ì €ì¥ ì„±ê³µ

---

## View ìˆ˜ì •í•˜ê¸°

ì´ì œ viewë¥¼ ìˆ˜ì •í•´ë´…ì‹œë‹¤. ê¸°ì¡´ `portfoilio.html`ë§Œ ë³´ì—¬ì£¼ì—ˆë˜ í™”ë©´ê³¼ ë‹¬ë¦¬ modelì„ ì—°ê²°í•´ ë°ì´í„°ë¥¼ ë°›ì•„ì•¼í•©ë‹ˆë‹¤. 


ìƒê°ì´ ì•ˆë‚˜ë©´ blog appì•ˆì— ìˆëŠ” view.pyë¥¼ ì°¸ê³ í•´ `portfolio app`ì˜ view.pyë¥¼
 ì•„ë˜ ë‚´ìš©ì²˜ëŸ¼ ë”ë“¬ë”ë“¬ ìˆ˜ì •í•´ë³´ì„¸ìš”.

```python
from django.shortcuts import render

from .models import Portfolio
# Create your views here.

def portfolio(request):
    portfolios = Portfolio.objects
    return render(request, 'portfolio/portfolio.html', {'portfolios': portfolios})
```

Portfolioê°ì²´ë“¤ì„ ë°›ì•„ htmlë¡œ ë„˜ê²¨ì£¼ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤.

---

## Template ìˆ˜ì •í•˜ê¸°

ì´ì œ templateì„ ìˆ˜ì •í•´ë´…ì‹œë‹¤.

ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤!

viewì—ì„œ ë„˜ì–´ì˜¨ portfoliosë¥¼ ì•„ë˜ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë¿Œë ¤ì¤ë‹ˆë‹¤.

```html
<div class="album py-5 bg-light">
  <div class="container">
	  <div class="row">
	  {% for portfolio in portfolios.all %}
	    <div class="col-md-4">
	      <div class="card mb-4 shadow-sm">
	        <img class="card-img-top" src="{{ portfolio.image.url }}" alt=" Card image cap">
	        <div class="card-body">
	          <h4>{{ portfolio.title }}</h4>
	          <p class="card-text">{{ portfolio.description }}</p>
	        </div>
	      </div>
	    </div>
    {% endfor %}
    </div>
  </div>
</div>
```

[ì‘ì„±ëœ ì½”ë“œ](https://gist.github.com/jun108059/df77a8684889ff0a3da3acf6c4d60f4c)ë„ ì˜¬ë ¤ë“œë¦´í…Œë‹ˆ ì°¸ê³ í•´ì„œ ìˆ˜ì •í•´ë³´ì„¸ìš”!


![img](../.vuepress/public/images/django2/portfolio-20.png)

> ì´ë ‡ê²Œ ë‚˜ì˜¤ë©´ ì„±ê³µ!

ì •ë¦¬í•´ë³´ìë©´,

1. settings.pyì— mediaíŒŒì¼ì´ ì–´ë–¤ urlì„ íƒ€ê³  í”„ë¡œì íŠ¸ë¡œ ë“¤ì–´ì˜¬ì§€, ì–´ë””ë¡œ ëª¨ì•„ì¤„ì§€ ì •ì˜í•©ë‹ˆë‹¤.
2. urls.pyì— ì´ë¯¸ì§€ê°€ íƒ€ê³  ë“¤ì–´ì˜¬ urlì„ ì„¤ê³„í•´ì¤ë‹ˆë‹¤.
3. ì—…ë¡œë“œ í•˜ê³ ì‹¶ì€ ë°ì´í„° classë¥¼ models.pyì— ì •ì˜í•´ì¤ë‹ˆë‹¤.
4. ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ìœ„í•œ pillow ëª¨ë“ˆì„¤ì¹˜ í›„ DBê°€ ì•Œì•„ë“¤ì„ ìˆ˜ ìˆë„ë¡ migration,migrateí•´ì¤ë‹ˆë‹¤.
5. admin.pyì— ìš°ë¦¬ portfolio DBì‚¬ìš©í• ê±°ì•¼ í•˜ê³  ì•Œë ¤ì¤ë‹ˆë‹¤. ì´ì œ adminí˜ì´ì§€ì— portfolioê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
6. views.pyì—ì„œ ëª¨ë“  ê°ì²´ë¥¼ ë°›ì•„ HTMLë¡œ ë„˜ê²¨ì¤ë‹ˆë‹¤.
7. HTMLì— ìš°ë¦¬ì˜ í¬íŠ¸í´ë¦¬ì˜¤ê°€ ì§ í•˜ê³  ë³´ì—¬ì§€ê²Œ ë©ë‹ˆë‹¤.

---